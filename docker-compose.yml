version: '3.3'

services:
  # mysql:
  #   image: mysql
  #   command: --default-authentication-plugin=mysql_native_password
  #   container_name: mysql
  #   restart: always
  #   environment:
  #     MYSQL_ROOT_PASSWORD: p@ssw0rd
  #     MYSQL_DATABASE: DB_TEST
  #     MYSQL_USER: rootapisit
  #     MYSQL_PASSWORD: p@ssw0rd
  #   ports:
  #     - 3306:3306
  #   networks:
  #     - application

  # phpmyadmin:
  #   image: phpmyadmin
  #   restart: always
  #   ports:
  #     - 8080:80
  #   environment:
  #     PMA_HOST: mysql
  #   networks:
  #     - application

  web-api:
    image: web-app
    restart: always
    container_name: web-app
    build: .
    environment:
      DB_HOST: mysql
      DB_PORT: 3306
      DB_USER: rootapisit
      DB_PASSWORD: p@ssw0rd
      DB_DATABASE: DB_TEST
      NODE_ENV: production
    ports:
      - 4000:4000
    depends_on:
      - mysql
    networks:
      - application

networks:
  application:
    driver: bridge