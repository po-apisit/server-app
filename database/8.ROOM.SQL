CREATE TABLE IF NOT EXISTS TB_TYPE_ROOM
(
    ID_TYPE_ROOM INT AUTO_INCREMENT PRIMARY KEY,
    ID_COMPANY VARCHAR(50),
    NAME_TYPE_FOOD VARCHAR(100) NOT NULL,
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    STATE ENUM("PUBLIC","PRIVATE") DEFAULT "PUBLIC",
    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (ID_COMPANY) REFERENCES TB_COMPANY (ID_COMPANY)
);

CREATE TABLE IF NOT EXISTS TB_ROOM
(
    ID_ROOM INT AUTO_INCREMENT PRIMARY KEY,
    NUMBER_ROOM VARCHAR(10),
    NAME_ROOM VARCHAR(50) NOT NULL,
    ID_COMPANY VARCHAR(50),
    ID_TYPE_ROOM INT,
    SIZE_SQM DECIMAL(5,2), -- ขนาด (ตารางเมตร)
    DAILY_RENT DECIMAL(10,2), -- ค่าเช่ารายวัน
    DESCRIPTION VARCHAR(255) NOT NULL,
    STATE ENUM("PUBLIC","PRIVATE") DEFAULT "PUBLIC",
    SHOW_ROOM ENUM("ONLYUSER","ALL") DEFAULT "ONLYUSER",
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (ID_COMPANY) REFERENCES TB_COMPANY (ID_COMPANY),
    FOREIGN KEY (ID_TYPE_ROOM) REFERENCES TB_TYPE_ROOM (ID_TYPE_ROOM)
);

-- สร้างตาราง AMENITIES เพื่อเก็บข้อมูลสิ่งอำนวยความสะดวกในห้อง
CREATE TABLE TB_ROOM_AMENITIES (
    ID_ROOM_AMENITIES INT AUTO_INCREMENT PRIMARY KEY,
    ID_ROOM INT,
    AIR_CONDITIONER BOOLEAN, -- แอร์
    BED BOOLEAN, -- เตียง
    WARDROBE BOOLEAN, -- ตู้เสื้อผ้า
    TABLE_SHELF BOOLEAN, -- โต๊ะวางของ
    EN_SUITE_BATHROOM BOOLEAN, -- ห้องน้ำในตัว
    WATER_HEATER BOOLEAN, -- เครื่องทำน้ำอุ่น
    CCTV BOOLEAN, -- มีระบบกล้องวงจรปิด CCTV
    FOOD BOOLEAN, -- ของกินครบครัน
    CLEAN BOOLEAN, -- สะอาด
    CONVENIENT BOOLEAN, -- สะดวก
    SAFE BOOLEAN, -- ปลอดภัย
    CABLE_TV BOOLEAN, -- เคเบิลทีวี / ดาวเทียม
    TV BOOLEAN, -- ทีวี
    STATUS ENUM("PUBLIC","PRIVATE") DEFAULT "PUBLIC",
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (ID_ROOM) REFERENCES TB_ROOM (ID_ROOM)
);


CREATE TABLE IF NOT EXISTS TB_ROOM_IMAGE
(
    ID_ROOM_IMAGE INT AUTO_INCREMENT PRIMARY KEY,
    ID_ROOM INT,
    IMAGE VARCHAR(100) NOT NULL,
    DESCRIPTION VARCHAR(150) NOT NULL,
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (ID_ROOM) REFERENCES TB_ROOM (ID_ROOM)
);

CREATE TABLE IF NOT EXISTS TB_GROUP_RESERVE_ROOM
(
    ID_GROUP_RESERVE_ROOM INT AUTO_INCREMENT PRIMARY KEY,
    ID_GROUP_RESERVE_COMPANY VARCHAR(50),
    ID_ROOM INT,
    DESCRIPTION VARCHAR(255) NOT NULL, 
    STATUS ENUM("PENDING", "REJECT", "APPROVE", "SUCCESS") DEFAULT "PENDING",
    STATUS_PAY ENUM("PENDING","PAY") DEFAULT "PENDING",
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    DELETED_AT TIMESTAMP DEFAULT NULL, -- เพิ่มคอลัมน์สำหรับเก็บวันที่ลบข้อมูล
    FOREIGN KEY (ID_GROUP_RESERVE_COMPANY) REFERENCES TB_GROUP_RESERVE_COMPANY (ID_GROUP_RESERVE_COMPANY),
    FOREIGN KEY (ID_ROOM) REFERENCES TB_ROOM (ID_ROOM)
);